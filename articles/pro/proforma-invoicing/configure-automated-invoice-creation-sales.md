---
title: Konfigurowanie automatycznego tworzenia faktury - wersja uproszczona
description: Ten temat zawiera informacje na temat konfigurowania automatycznego tworzenia faktur proforma.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 1d911ab0defaaee40d8752557e1115ea49c8fa93
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 02/15/2021
ms.locfileid: "5274336"
---
# <a name="configure-automatic-invoice-creation---lite"></a><span data-ttu-id="aae3b-103">Konfigurowanie automatycznego tworzenia faktury - wersja uproszczona</span><span class="sxs-lookup"><span data-stu-id="aae3b-103">Configure automatic invoice creation - lite</span></span>
 
<span data-ttu-id="aae3b-104">_**Zastosowane w:** Wdrażanie uproszczone — od okazji do faktury pro forma_</span><span class="sxs-lookup"><span data-stu-id="aae3b-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="aae3b-105">Można skonfigurować automatyczne tworzenie faktury w rozwiązaniu Dynamics 365 Project Operations.</span><span class="sxs-lookup"><span data-stu-id="aae3b-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="aae3b-106">System utworzy roboczą fakturę pro forma na podstawie harmonogramu fakturowania dla każdej umowy dotyczącej projektu i pozycji kontraktu.</span><span class="sxs-lookup"><span data-stu-id="aae3b-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="aae3b-107">Harmonogramy faktur są konfigurowane na poziomie pozycji kontraktu.</span><span class="sxs-lookup"><span data-stu-id="aae3b-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="aae3b-108">Każdy wiersz kontraktu może zawierać odrębny harmonogram fakturowania lub ten sam harmonogram fakturowania może być uwzględniany w każdym wierszu kontraktu.</span><span class="sxs-lookup"><span data-stu-id="aae3b-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="aae3b-109">Podczas tworzenia faktury system zawsze tworzy co najmniej jedną fakturę przypadającą na każdy kontrakt projektu.</span><span class="sxs-lookup"><span data-stu-id="aae3b-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="aae3b-110">W niektórych przypadkach może być utworzonych wiele faktur.</span><span class="sxs-lookup"><span data-stu-id="aae3b-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="aae3b-111">Jeśli na przykład kontrakt ma wielu klientów, zostanie utworzone tyle faktur, ilu klientów danego kontraktu projektu powinno być zafakturowanych w ramach rozliczanych transakcji.</span><span class="sxs-lookup"><span data-stu-id="aae3b-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="aae3b-112">Rozumienie sposobu uwzględniania transakcji na fakturze</span><span class="sxs-lookup"><span data-stu-id="aae3b-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="aae3b-113">Czasami każdy wiersz kontraktu opartego na projektach określa osobny harmonogram faktur.</span><span class="sxs-lookup"><span data-stu-id="aae3b-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="aae3b-114">Na przykład usługi implementacji dla kontraktu Adatum mają następujące pozycje kontraktu:</span><span class="sxs-lookup"><span data-stu-id="aae3b-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="aae3b-115">Prototypowa praca zawierająca dwa ręcznie utworzone punkty kontrolne z ceną stałą.</span><span class="sxs-lookup"><span data-stu-id="aae3b-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="aae3b-116">Praca wdrożeniowa obejmująca Czas będzie rozliczana co dwa tygodnie, w poniedziałek.</span><span class="sxs-lookup"><span data-stu-id="aae3b-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="aae3b-117">Koszty poniesione, które muszą być rozliczane miesięcznie w pierwszy poniedziałek każdego miesiąca.</span><span class="sxs-lookup"><span data-stu-id="aae3b-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="aae3b-118">Harmonogramy faktur zdefiniowane dla każdego z tych dwóch wierszy wyglądają jak w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="aae3b-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="aae3b-119">Pozycja kontraktu</span><span class="sxs-lookup"><span data-stu-id="aae3b-119">Contract line</span></span> | <span data-ttu-id="aae3b-120">Data przebiegu fakturowania</span><span class="sxs-lookup"><span data-stu-id="aae3b-120">Invoice run date</span></span> | <span data-ttu-id="aae3b-121">Ostateczny termin transakcji</span><span class="sxs-lookup"><span data-stu-id="aae3b-121">Transaction cut-off date</span></span> | <span data-ttu-id="aae3b-122">Data punktu kontrolnego</span><span class="sxs-lookup"><span data-stu-id="aae3b-122">Milestone date</span></span> | <span data-ttu-id="aae3b-123">Kwota punktu kontrolnego</span><span class="sxs-lookup"><span data-stu-id="aae3b-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="aae3b-124">Praca w ramach prototypu</span><span class="sxs-lookup"><span data-stu-id="aae3b-124">Prototype work</span></span> | <span data-ttu-id="aae3b-125">5 października, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-125">October 5, Monday</span></span> | - | <span data-ttu-id="aae3b-126">5 października, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-126">October 5, Monday</span></span> | <span data-ttu-id="aae3b-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="aae3b-127">5000 USD</span></span> |
| - | <span data-ttu-id="aae3b-128">3 listopada, wtorek</span><span class="sxs-lookup"><span data-stu-id="aae3b-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="aae3b-129">3 listopada, wtorek</span><span class="sxs-lookup"><span data-stu-id="aae3b-129">November 3, Tuesday</span></span> | <span data-ttu-id="aae3b-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="aae3b-130">12,000 USD</span></span> |
| <span data-ttu-id="aae3b-131">Praca w ramach implementacji</span><span class="sxs-lookup"><span data-stu-id="aae3b-131">Implementation work</span></span> | <span data-ttu-id="aae3b-132">5 października, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-132">October 5, Monday</span></span> | <span data-ttu-id="aae3b-133">4 października, niedziela</span><span class="sxs-lookup"><span data-stu-id="aae3b-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="aae3b-134">19 października, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-134">October 19, Monday</span></span> | <span data-ttu-id="aae3b-135">18 października, niedziela</span><span class="sxs-lookup"><span data-stu-id="aae3b-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="aae3b-136">2 listopada, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-136">November 2, Monday</span></span> | <span data-ttu-id="aae3b-137">1 listopada, niedziela</span><span class="sxs-lookup"><span data-stu-id="aae3b-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="aae3b-138">16 listopada, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-138">November 16, Monday</span></span> | <span data-ttu-id="aae3b-139">15 listopada, niedziela</span><span class="sxs-lookup"><span data-stu-id="aae3b-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="aae3b-140">Poniesione wydatki</span><span class="sxs-lookup"><span data-stu-id="aae3b-140">Expenses incurred</span></span> | <span data-ttu-id="aae3b-141">5 października, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-141">October 5, Monday</span></span> | <span data-ttu-id="aae3b-142">4 października, niedziela</span><span class="sxs-lookup"><span data-stu-id="aae3b-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="aae3b-143">2 listopada, poniedziałek</span><span class="sxs-lookup"><span data-stu-id="aae3b-143">November 2, Monday</span></span> | <span data-ttu-id="aae3b-144">1 listopada, niedziela</span><span class="sxs-lookup"><span data-stu-id="aae3b-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="aae3b-145">W tym przykładzie, gdy jest wykonywane automatyczne fakturowanie:</span><span class="sxs-lookup"><span data-stu-id="aae3b-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="aae3b-146">**4 października lub dowolna wcześniejsza data**: dla niniejszego kontraktu nie jest generowana żadna faktura, ponieważ **Harmonogram fakturowania** dla każdej z tych pozycji kontraktu nie zawiera wartości niedziela, 4 października jako datę przebiegu faktury.</span><span class="sxs-lookup"><span data-stu-id="aae3b-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="aae3b-147">**5 października, poniedziałek**: Jedna faktura jest generowana dla:</span><span class="sxs-lookup"><span data-stu-id="aae3b-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="aae3b-148">Prototypowej pracy obejmującej punkt kontrolny, jeśli jest on oznaczony jako **Gotowy do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="aae3b-149">Praca nad implementacją obejmująca wszystkie transakcje Czasu utworzone przed terminem końcowym w dniu 4 października, w niedzielę, które są oznaczone jako **Gotowe do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="aae3b-150">Poniesiony wydatek obejmujący wszystkie transakcje wydatków utworzone przed terminem końcowym w dniu 4 października, w niedzielę, które są oznaczone jako **Gotowe do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="aae3b-151">**6 października lub dowolna wcześniejsza data przed 19 października**: dla niniejszego kontraktu nie jest generowana żadna faktura, ponieważ **Harmonogram fakturowania** dla każdej z tych pozycji kontraktu nie zawiera wartości 6 października lub daty przed 19 października jako daty przebiegu faktury.</span><span class="sxs-lookup"><span data-stu-id="aae3b-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="aae3b-152">**19 października, poniedziałek**: Praca nad implementacją obejmująca wszystkie transakcje Czasu utworzone przed terminem końcowym w dniu 18 października, w niedzielę, które są oznaczone jako **Gotowe do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="aae3b-153">**2 listopada, poniedziałek**: Jedna faktura jest generowana dla:</span><span class="sxs-lookup"><span data-stu-id="aae3b-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="aae3b-154">Praca nad implementacją obejmująca wszystkie transakcje Czasu utworzone przed terminem końcowym w dniu 1 listopada, w niedzielę, które są oznaczone jako **Gotowe do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="aae3b-155">Poniesiony wydatek obejmujący wszystkie transakcje wydatków utworzone przed terminem końcowym w dniu 1 listopada, w niedzielę, które są oznaczone jako **Gotowe do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="aae3b-156">**3 listopada, wtorek**: jedna faktura jest generowana na potrzeby zadania prototypowego zawierającego punkt kontrolny 12 000 USD, jeśli jest on oznaczony jako **Gotowy do zafakturowania**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="aae3b-157">Konfiguruj automatyczne fakturowanie</span><span class="sxs-lookup"><span data-stu-id="aae3b-157">Configure automatic invoicing</span></span>

<span data-ttu-id="aae3b-158">Wykonaj poniższe kroki, aby skonfigurować zautomatyzowany przebieg fakturowania.</span><span class="sxs-lookup"><span data-stu-id="aae3b-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="aae3b-159">W **Project Operations** wybierz kolejno **Ustawienia** > **Ustawienia faktur cyklicznych**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="aae3b-160">Utwórz zadanie przetwarzania wsadowego i nazwij je **Tworzenie faktur w Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="aae3b-161">Nazwa zadania wsadowego musi zawierać słowa „Tworzenie faktur”.</span><span class="sxs-lookup"><span data-stu-id="aae3b-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="aae3b-162">W polu **Typ zadania** wybierz **Brak**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="aae3b-163">Domyślnie pola **Częstotliwość dzienna** i **Jest aktywne** są ustawione na **Tak**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="aae3b-164">Wybierz **Uruchom przepływ pracy**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-164">Select **Run Workflow**.</span></span> <span data-ttu-id="aae3b-165">W oknie dialogowym **wyszukiwania rekordu** zostaną wyświetlone trzy przepływy pracy:</span><span class="sxs-lookup"><span data-stu-id="aae3b-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="aae3b-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="aae3b-166">ProcessRunCaller</span></span>
- <span data-ttu-id="aae3b-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="aae3b-167">ProcessRunner</span></span>
- <span data-ttu-id="aae3b-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="aae3b-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="aae3b-169">Wybierz **ProcessRunCaller**, a następnie wybierz opcję **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="aae3b-170">W następnym oknie dialogowym wybierz **OK**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="aae3b-171">Po wykonaniu przepływu pracy **Uśpienie** następuje przepływ pracy **Proces**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="aae3b-172">Możesz również wybrać opcję **ProcessRunner** w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="aae3b-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="aae3b-173">Następnie po wybraniu opcji **OK** przepływ pracy **Proces** jest zastępowany przepływem pracy **Uśpienie**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="aae3b-174">Przepływy pracy **ProcessRunCaller** i **ProcessRunner** tworzą faktury.</span><span class="sxs-lookup"><span data-stu-id="aae3b-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="aae3b-175">**ProcessRunCaller** wywołuje **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="aae3b-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="aae3b-176">**ProcessRunner** to przepływ pracy, który w rzeczywistości tworzy faktury.</span><span class="sxs-lookup"><span data-stu-id="aae3b-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="aae3b-177">Przepływ pracy przechodzi między wszystkimi pozycjami kontraktu, dla których muszą zostać utworzone faktury i tworzy faktury dla tych pozycji.</span><span class="sxs-lookup"><span data-stu-id="aae3b-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="aae3b-178">W celu określenia pozycji kontraktu, dla których mają zostać utworzone faktury, zadanie będzie znajdzie daty rozpoczęcia fakturowania w pozycjach kontraktu.</span><span class="sxs-lookup"><span data-stu-id="aae3b-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="aae3b-179">Jeśli pozycje kontraktu należące do jednego kontraktu mają taką samą datę rozpoczęcia fakturowania, transakcje zostaną połączone na jedną fakturę zawierającą dwa wiersze faktury.</span><span class="sxs-lookup"><span data-stu-id="aae3b-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="aae3b-180">W przypadku braku transakcji do utworzenia faktur dla zadania program pominie tworzenie faktury.</span><span class="sxs-lookup"><span data-stu-id="aae3b-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="aae3b-181">Kiedy **ProcessRunner** zakończy działanie, wywołuje **ProcessRunCaller**, dostarcza godzinę zakończenia i następuje zamknięcie.</span><span class="sxs-lookup"><span data-stu-id="aae3b-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="aae3b-182">**ProcessRunCaller** następnie uruchamia zegar, który trwa 24 godziny od określonego czasu końcowego.</span><span class="sxs-lookup"><span data-stu-id="aae3b-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="aae3b-183">Po upływie tego czasu program **ProcessRunCaller** jest zamknięty.</span><span class="sxs-lookup"><span data-stu-id="aae3b-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="aae3b-184">Zadanie przetwarzania wsadowego umożliwiającego tworzenie faktur jest zadaniem powtarzanym.</span><span class="sxs-lookup"><span data-stu-id="aae3b-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="aae3b-185">Jeśli ten proces wsadowy jest wykonywany wiele razy, system tworzy wiele wystąpień zadania i powoduje to wystąpienie błędów.</span><span class="sxs-lookup"><span data-stu-id="aae3b-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="aae3b-186">Z tego powodu proces przetwarzania wsadowego powinien być uruchamiany i zrestartowany tylko raz, gdy zakończy się jego działanie.</span><span class="sxs-lookup"><span data-stu-id="aae3b-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="aae3b-187">Fakturowanie wsadowe w Project Operations jest wykonywane tylko dla wierszy kontraktu projektu, które są konfigurowane przez harmonogramy faktur.</span><span class="sxs-lookup"><span data-stu-id="aae3b-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="aae3b-188">Pozycja kontraktu z metodą fakturowania przy stałej cenie musi mieć skonfigurowany punkt kontrolny.</span><span class="sxs-lookup"><span data-stu-id="aae3b-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="aae3b-189">Pozycja kontraktu projektu z metodą rozliczania czasu i materiału będzie wymagała konfiguracji harmonogramu fakturowania opartego na datach.</span><span class="sxs-lookup"><span data-stu-id="aae3b-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]